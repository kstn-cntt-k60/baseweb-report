\chapter{CƠ SỞ LÝ THUYẾT VÀ CÔNG NGHỆ SỬ DỤNG}

\section{Giải pháp quản lý phân phối}
\subsection{Các khái niệm trong quản lý phân phối}
Trước tiên, ta cần tìm biết về một từ khóa đã trở nên rất
phổ biến trong thời gian gần đây,
đó là Logistics~\cite{logistics:online}. Hiểu một cách đơn
giản thì Logistics là quá trình lên kế hoạch, áp dụng và kiểm soát
các luồng dịch chuyển của hàng hóa hay thông tin liên quan tới nguyên
nhiên liệu vật tư (đầu vào) và sản phẩm cuối cùng (đầu ra) từ thời
điểm xuất phát tới điểm tiêu thụ. Đi kèm với Logistics là khái niệm
về Quản trị chuỗi cung ứng (Supply Chain Management), Quản trị chuỗi
cung ứng bao gồm tất cả những hoạt động quản trị logistics cũng như
những hoạt động sản xuất và thúc đẩy sự phối hợp về quy trình và
hoạt động của các bộ phận marketing, kinh doanh, thiết kế sản phẩm,
tài chính, công nghệ thông tin. Khái niệm chuỗi cung ứng rộng hơn,
bao gồm cả logistics và quá trình sản xuất. Ngoài ra chuỗi cung ứng
chú trọng hơn đến hoạt động mua hàng (procedurement) trong khi
logistics giải quyết các vấn đề chiến lược, phối hợp giữa marketing và
sản xuất.

Khi đã có một hình dung cơ bản về chuỗi cung ứng, ta đến với
phần chính là \textbf{hệ thống quản lý phân phối}
(Distribution Management System). Hệ thống quản lý phân phối
(Distribution Management System) là phần mềm quản lý chuỗi
cung ứng hàng hóa của doanh nghiệp, giúp họ quản lý các hoạt
động phân phối hàng hóa ra thị trường, kiểm soát các kênh phân
phối, quản lý nhân viên, người bán hàng, kiểm soát hàng hóa
trong kho, hàng tồn kho, kế hoạch vận chuyển
hàng hóa đến địa chỉ mua hàng,…

Ví dụ, Masan Group là một công ty lớn trong lĩnh vực kinh tế
tư nhân Việt Nam, tập trung hoạt động trong ngành hàng tiêu dùng và
tài nguyên của Việt Nam. Masan quản lý các nền tảng kinh doanh có
quy mô lớn nhằm phát triển và khai thác các tiềm năng trong lĩnh vực
tiêu dùng và tài nguyên. Còn rất nhiều những tập đoàn bán lẻ khác
có cùng cơ chế quản lý kinh doanh như Masan, mỗi tập đoàn như vậy đều
cần có một hệ thống riêng để quản lý chuỗi cung ứng của mình.

Vì vậy Distribution Management System là một trong số những
phần mềm quản lý doanh nghiệp có tính ứng dụng cao, phù hợp với mọi
doanh nghiệp sản xuất và phân phối. Đối với các doanh nghiệp lớn
(ví dụ Masan, VinGroup) có đội ngũ nhân viên bán hàng đông đảo và các
kênh phân phối phức tạp, phần mềm DMS càng quan trọng và là công cụ không
thể thiếu. Các nhà quản lý của các tập đoàn lớn này luôn đau đầu vì
những câu hỏi như “Làm thế nào để nắm được nhanh nhất xu thế, biến động
của thị trường?”, “Làm thế nào để kiểm soát phân phối tốt, duy
trì tồn kho ở mức tối ưu, tiết kiệm thời gian?”, “Tự động hóa bán
hàng, tăng hiệu quả bán hàng cho đội ngũ nhân viên bán hàng như
thế nào?”. Với hệ thống quản lý kênh phân phối (DMS), các doanh nghiệp
lớn với vài trăm, hoặc vài nghìn nhân viên bán hàng, hàng chục
nghìn điểm bán sẽ dễ dàng làm được việc này.

\subsection{Lợi ích của hệ thống quản lý phân phối}
Phần trên đã trình bày về lý do tại sao các doanh nghiệp và tập
đoàn bán lẻ phải sử dụng giải pháp quản lý phân phối và sau đây
là những lợi ích chính, thấy rõ nhất theo như tìm hiểu của chúng tôi.

Thứ nhất Distribution Management System~\cite{dms:online}
là công cụ tự động hóa
bán hàng, giúp nhân viên bán hàng (salesman) tiết kiệm thời gian,
tăng chất lượng chăm sóc khách hàng, tối ưu doanh thu. Mọi thông
tin nhân viên bán hàng cần khi ghé thăm một điểm bán lẻ (rental outlet) 
bao gồm thông tin về khách hàng (customer), lịch sử mua hàng, 
các báo cáo bán hàng, thông tin sản phẩm, chương trình khuyến mãi,… 
có sẵn trong ứng dụng di động DMS để nhân viên có thể dễ dàng theo
dõi tại điểm bán.

Thứ hai Distribution Management System có thể quản lý hiệu quả
làm việc của nhân viên bán hàng, nhà quản lý có thể nắm được lộ
trình ghé thăm khách hàng của nhân viên trên bản đồ lịch sử checkin.
Thông qua đó đánh giá được nhân viên bán hàng có đang tích cực
ngoài thị trường hay không, khách hàng có được chăm sóc tốt hay không.

Thứ ba, đặc biệt hơn là qua hệ thống nhà quản trị sẽ biết
được những cửa hàng nào đang liên tục phát sinh doanh số, những cửa hàng
nào lâu rồi chưa phát sinh đơn hàng mới. Từ đó có thể sắp xếp,
phân chia hợp lý các nhân viên bán hàng vào các tuyến bán
hàng, thay đổi tần suất viếng thăm khách hàng cho phù hợp với
thực tế, tránh lãng phí nguồn lực đồng thời có thể chăm sóc được kỹ
hơn các cửa hàng trọng tâm.

Thứ tư, cập nhật thị trường là điểm nổi bật của phần mềm 
Distribution Management System. Giúp các doanh nghiệp phân phối có thể
kiểm soát được hàng tồn tại từng điểm bán lẻ, đại lý nhằm
đưa ra kế hoạch sản xuất, điều phối hàng hóa phù hợp.

% \subsection{Khảo sát thực tế việc sử dụng hệ thống quản lý phân phối}
% Khi chưa sử dụng Distribution Management System, có rất nhiều
% lỗ hổng mà các doanh nghiệp phân phối phải đối mặt như sau đây:
% \begin{itemize}[topsep=0ex]
% \item Hàng tồn kho: Không kiểm soát được hàng tồn kho của nhà
%     phân phối, cửa hàng để tối ưu hóa chuỗi cung ứng và các
%     chiến lược tiêu thụ hàng. Công ty sẽ không có sự chủ động trong
%     việc cung ứng và tiêu thụ hàng trên thị trường, đặc biết là loại
%     mặt hàng có thời hạn sử dụng ngắn, sẽ không kiểm soát được hàng
%     đang ở đâu trong chuỗi cung ứng của mình.

% \item Bao phủ: Việc quản lý và tối ưu tuyến bán hàng theo từng
%     ngành hàng, khu vực, đội bán hàng để gia tăng độ bao phủ
%     cũng là một vấn đề.

% \item Doanh số: Doanh số luôn là vấn đề đau đầu của các nhà quản lý,
%     họ sẽ không có đầy đủ thông tin để triển khai các chương trình
%     bán hàng một cách có hiệu quả.

% \item Hiệu suất: Làm thế nào để biết đội ngũ bán hàng của công ty
%     có hoạt động với hiệu suất 100\% hoặc hơn không? Làm sao để
%     thiết kế các KPI và kiểm soát hiệu quả giúp họ có động lực bán
%     hàng, tăng hiệu suất làm việc? Đội ngũ nhân viên bán hàng có
%     được theo sát và huấn luyện các kỹ năng bán hàng hay không?

% \item Số ảo: Tình trạng số ảo khá phổ biến trong bán hàng và phân phối,
%     các số liệu ảo về điểm bán, doanh số, khuyến mãi, tồn kho, …
%     luôn là nỗi lo lắng của các nhà quản lý vì điều này ảnh hưởng lớn
%     đến việc ra quyết định của họ.

% \item Tích hợp: Trong mô hình phân phối hiện đại và đa kênh, các công
%     ty cung cấp, phân phối hàng hóa ra thị trường cũng sẽ đối diện
%     với vấn đề tiếp xúc và xử lý thông tin với nhiều hệ thống, hình
%     thức dữ liệu khác nhau. Làm thế nào để thiết kế mô hình dữ liệu
%     chung đồng nhất nhưng vẫn đảm bảo các quy trình, điểm đặc thù
%     của mỗi kênh, mỗi hệ thống, đảm bảo tính xuyên suốt, đồng nhất
%     và kịp thời của thông tin.
% \end{itemize}

% Còn sau khi áp dụng giải pháp quản lý hệ thống phân phối
% (DMS) thì các nhà quản lý thu được:
% \begin{itemize}[topsep=0ex]
% \item Dữ liệu thật: Với các quy trình và chức năng được thiết kế chặt
%     chẽ và hỗ trợ hiệu quả các đối tượng sử dụng trong hệ thống sẽ
%     giúp công ty có được bộ dữ liệu đầy đủ và thật từ dữ liệu
%     thị trường, điểm bán, tuyến bán hàng đến tồn kho, sell-in, sell-out,
%     khuyến mãi, trưng bày, … hạn chế và ngăn chặn tối đa các trường hợp
%     thay đổi dữ liệu bán hàng. Dữ liệu thất này sẽ giúp công ty ra
%     quyết định và triển khai các chiến lược bán hàng hiệu quả
%     và chính xác hơn.

% \item Chủ động và làm chủ thị trường: Doanh nghiệp hoàn toàn chủ động
%     trong triển khai chiến lược bán hàng, chủ động khi có sự thay đổi,
%     biến động về nhân sự trong hệ thống phân phối và dễ dàng thiết
%     lập các nhà phân phối mới, khu vực mới cho các hệ thống bán hàng mới.

% \item Gia tăng giá trị thương hiệu: Việc triển khai và quản lý hiệu
%     quả các chương trình bán hàng giúp thu hút và thúc đẩy tiêu thụ
%     từ người tiêu dùng làm gia tăng sự trung thành từ người tiêu
%     dùng cũng như sự hợp tác từ nhà phân phối vì
%     họ thấy được lợi ích thật sự
% \end{itemize}

% Hiện nay trên thị trường có một số ít sản phẩm phần mềm quản lý hệ
% thống phân phối cho doanh nghiệp (DMS). Sử dụng phần mềm này thường
% là những người quản lý của doanh nghiệp, công ty, hãng phân phối.
% Do tính chất đặc thù như vậy mà những người tiếp cận và sử dụng phần
% mềm kiểu này này khá ít, và phần mềm quản lý hệ thống phân phối DMS
% cũng không phổ biến rộng rãi cho mọi đối tượng. Một số phần mềm DMS
% có thể kể đến như Adaline, BS Silver, SSE, Perfect Warehouse, GM Sales,
% KiotViet, Suno, Sapo, … Mỗi phần mềm sẽ cung cấp những tính năng đặc
% biết riêng, tính phí hoặc không tính phí, dùng offline hoặc online, từng
% nền tảng (Windows, Android, iOS) và ưu nhược điểm khác nhau. Các phần
% mềm offline như Adaline, BS Silver, Perfect Warehouse, … sẽ có ưu điểm
% là miễn phí, tốc độ nhanh, bảo mật cao. Tuy nhiên chỉ phù hợp với những
% cửa hàng bán lẻ, vừa và nhỏ, tính năng hạn chế, không có khả năng mở
% rộng. Sapo hay KiotViet là các phần mềm quản lý phân phối phổ biến
% hơn khi cung cấp cho người dùng nhiều tính năng với mức giá rẻ, giao
% diện làm việc trực tuyến, nhanh, dễ sử dụng, … Các phần mềm kiểu này
% phù hợp với những công ty, doanh nghiệp phân phối lớn hơn khi khả năng
% nắm bắt biến động thị trường là cần thiết để đưa ra những
% chiến lược kinh doanh kịp thời.

% Ở Việt Nam hiện nay, KiotViet là phần mềm quản lý bán hàng phổ biến
% nhất với hơn 100,000 cửa hàng đang sử dụng và hơn 5,000 cửa hàng mới
% mỗi tháng. Đơn giản, dễ dùng, tiết kiệm chi phí và phù hợp với hơn
% 15 ngành hàng khác nhau. KiotViet sẽ cung cấp cho người dùng một khung
% tính năng cố định ứng với từng ngành hàng khác nhau. Một phần mềm
% quản lý hoàn chỉnh có hai phần, một là trang quản lý, hai là trang
% bán hàng. Trang quản lý của KiotViet có các tính năng về quản lý hàng
% hóa (quản lý danh mục, thiết lập giá, …), quản lý giao dịch (lên hóa đơn,
% đặt hàng, xuất hàng, …), quản lý nhân viên, quản lý khách hàng và
% nhà cung cấp, xuất báo cáo (cuối ngày, theo tuần, theo tháng ,…).
% Trang bán hàng của KiotViet cung cấp một giao diện đơn giản tương tự
% như giao diện thanh toán bán hàng ở các cửa hàng bán lẻ hay
% siêu thị nhỏ. Đơn giản chỉ chọn sản phẩm, tính tiền, thanh toán
% và xuất hóa đơn cho khách.

% Trong ứng dụng quản lý phân phối của chúng tôi, ngoài những tính
% năng cơ bản, cần thiết như quản lý sản phẩm, quản lý hàng trong kho,
% quản lý giao dịch, quản lý nhân viên, quản lý phân quyền động thì ứng
% dụng một tính năng mới. Đó là ứng dụng cung cấp chức năng gợi ý,
% lên lịch trình viếng thăm cho các nhân viên bán hàng (salesman), lưu
% lại lịch sử check-in của nhân viên bán hàng. Nhân viên bán hàng
% là người hàng ngày sẽ thăm một số cửa hàng bán lẻ (rental outlet),
% kiểm tra lượng hàng hóa bán ra, từ đó lên hóa đơn để nhập hàng hóa
% mới về. Để các nhân viên bán hàng này hoạt động hiệu quả nhất, cần
% phân công họ vào các tuyến bán hàng phù hợp, để họ vừa có thể di chuyển
% một cách dễ dàng giữa các cửa hàng bán lẻ, vừa đến được nhiều cửa
% hàng nhất có thể. Chi tiết về tính năng mới này sẽ được trình bày
% trong chương sau của đồ án.

\section{Cơ sở lý thuyết}
\subsection{Role-Based Access Control}
Trong an toàn thông tin, role-based access control (RBAC) là
một cách tiệp cận cho vấn đề hạn chế quyền truy cập của
người dùng. RBAC được sử dụng phổ biến tại các tổ chức
lớn với nhiều hơn 500 nhân viên. 

RBAC có nhiều mô hình khác nhau. Mô hình cơ bản là
$\text{RBAC}_0$, mô hình có chứa quan hệ phân cấp là
$\text{RBAC}_1$, có chứa ràng buộc $\text{RBAC}_2$ và mô hình tăng
cường (consolidated) $\text{RBAC}_3$~\cite{rbac}.

Các thành phần chính của RBAC bao gồm user (người dùng),
role (vai trò), permission (quyền) và session (phiên truy cập)
cùng với quan hệ giữa chúng nhằm đơn giản hóa quá trình
gán quyền cho người dùng. 

User hay người dùng trong mô hình RBAC là con người, tuy nhiên
khái niệp này có thể được tổng quát hóa bằng việc bao gồm cả những
tác nhân tự động như robot hay phần mềm khác. Một role là một
chức năng công việc hay chức vụ trong tổ chức đi kèm với các
thẩm quyển mà nhân viên trong chức vụ đó nắm giữ. Còn một
permission là sự một chấp nhận cho một phương thức truy cập
vào một hay nhiều các đối tượng trong hệ thống. Việc một
permission tương ứng với gì thì tùy thuộc vào hệ thống
implement ra sao mô hình RBAC.

Mỗi một session là một ánh xạ từ mỗi phần tử của tập user
sang tập con của tập các role. Session thiết lập một phiên
truy cập với tập các role được kích hoạt (là một tập con
của tập các role mà người dùng đó được gán). Mỗi một phiên truy
cập tương ứng cho một user, trong $\text{RBAC}_0$ sự tương ứng này
là không thay đổi theo thời gian.

Trong RBAC, permission được gán với một hoặc nhiều role,
người dùng hay nhân viên được gán với một hay nhiều role.
Người dùng trong RBAC không được gán trực tiếp các permission mà
phải thông qua role, từ đó đơn giản hóa quá trình gán
permission hay việc chuyển phòng ban công tác của nhân viên. 

Trong đồ án này chỉ sử dụng mô hình điều khiển truy cập
dựa trên $\text{RBAC}_0$, biểu diễn toán học của $\text{RBAC}_0$ như sau:
\begin{itemize}[topsep=0ex]
\item Tập $U$, $R$, $P$ và $S$ tương ứng với tập hợp của các
    user, role, permission và session.
\item Tập $PA \subseteq P \times R$ biểu diễn quan hệ nhiều nhiều
    giữa permission và role.
\item Tập $UA \subseteq U \times R$ biểu diễn quan hệ nhiều nhiều giữa user và role.
\item Ánh xạ $user: S \rightarrow U$ gán mỗi một
    session $s$ cho một user $user(s)$.
\item Ánh xạ $roles: S \rightarrow \mathcal{P}(R)$ gán mỗi một
    session $s$ cho tập con của các role: 
    $roles(s) \subseteq \{ r | \left( user(s), r \right) \in UA \}$
    (có thể thay đổi theo thời gian) và session sẽ có các permission
    là $\bigcup_{r \in roles(s)}  \{ p | (p, r) \in PA \}$
\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[width=12cm]{images/RBAC.png}
\caption{Các mô hình RBAC}
\end{figure}

\subsection{Thuật toán phân cụm dữ liệu}
\subsubsection{Giới thiệu về bài toán phân cụm dữ liệu}
Phân cụm là kỹ thuật quan trọng trong xử lý dữ liệu, nó thuộc lớp
các phương pháp học không giám sát (Unsupervised Learning) trong học
máy (Machine Learning). Giải thích dễ hiểu hơn thì phân cụm là
các quy trình tìm cách nhóm các đối tượng đã cho vào các cụm (cluster),
sao cho các đối tượng trong cùng một cụm tương tự nhau (similar) và
các đối tượng khác cụm thì không tương
tự nhau (dissimilar)~\cite{kmeans:online}.

Mục đích của phân cụm là tìm ra bản chất bên trong các
nhóm của dữ liệu và có thể  áp dụng trong rất nhiều lĩnh vực như:
\begin{itemize}[topsep=0ex]
\item Trong marketing, xác định các nhóm khách hàng (khách hàng tiềm
    năng, khách hàng giá trị, phân loại và dự đoán hành vi khách
    hàng, …) sử dụng sản phẩm hay dịch vụ của công ty để giúp
    công ty có chiến lược kinh doanh hiệu quả hơn.

\item Trong sinh học, phân nhóm động vật và thực vật
    dựa vào các thuộc tính của chúng.

\item  Trong bảo hiểm, tài chính: phân nhóm các đối tượng
    sử dụng bảo hiểm và các dịch vụ tài chính, dự đoán xu hướng
    của khách hàng, phát hiện gian lận tài chính, …

\item Trong phân tích dữ liệu web: phân loại tài liệu, phân
    loại người dùng web, …
\end{itemize}

\subsubsection{Thuật toán K-Means}
K-Means là thuật toán quan trọng và được sử dụng phổ biến
trong kỹ thuật phân cụm. Tư tưởng chính của thuật toán K-Means
là tìm cách phân nhóm các đối tượng đã cho vào $K$ cụm ($K$ là
số cụm được xác định trước, $K$ nguyên dương) sao cho khoảng các từ
các đối tượng đến tâm nhóm (centroid) là nhỏ nhất.

Phát biểu bài toán: Cho $N$ điểm trên không gian $d$ chiều.
Làm thế nào để phân chia thành $K$ nhóm mà các điểm trong
một nhóm có khoảng cách gần trọng tâm của nhóm hơn so với
khoảng cách đến trọng tâm của bất kì 1 nhóm nào khác.

Đầu vào, đầu ra của thuật toán:
\begin{itemize}[topsep=0ex]
\item Đầu vào: Cho $N$ điểm, mỗi điểm có 
    dạng $(x, y)$. $K$ là số nhóm (cụm) ($K \le N$).
\item Đầu ra: Danh sách K nhóm là các điểm của mỗi nhóm.
\end{itemize}
\begin{figure}[H]
    \centering
    \includegraphics[width=8cm]{images/k-means-flow.png}
    \caption{Biểu đồ khối mô tả thuật toán K-Means}
\end{figure}

Chi tiết các bước thực hiện thuật toán K-Means:
\begin{itemize}[topsep=0ex]
\item Bước 1: Chọn ngẫu nhiên $K$ tâm (centroid) cho $K$ cụm (cluster).
    Mỗi cụm được đại diện bằng các tâm của cụm.

\item Bước 2: Tính khoảng cách giữa các điểm đến tâm $(c_x, c_y)$
    của từng nhóm.
    Dùng khoảng cách Euclidean: 
    $d(a, b) = \sqrt{(a_x - b_x)^2 + (a_y - b_y)^ 2}$

\item Bước 3: Nhóm các điểm vào nhóm có khoảng cách từ tâm
    đến điểm đó nhỏ nhất.

\item Bước 4: Xác định lại tâm mới cho các nhóm, sử dụng công thức:
    $$
    c_x = \frac{a_{1x} + a_{2x} + \cdots + a_{mx}}{m}
    $$
    $$
    c_y = \frac{a_{1y} + a_{2y} + \cdots + a_{my}}{m}
    $$
    với $m$ số phần tử của nhóm.

\item Bước 5: Nếu $(c_x, c_y)$ không đổi thì đó là tâm cần tìm.
    Nếu không thì lặp lại bước 2.
\end{itemize}

Thuật toán này được áp dụng vào chức năng gợi ý phân tuyến
bán hàng cho nhân viên bán hàng của người quản lý tuyến.
Đầu vào của bài toán là $N$ điểm (tương ứng với $N$ cửa hàng bán lẻ)
và $K$ cụm (do người quản lý thiết lập). Cần chia $N$ điểm
này cho $K$ cụm một cách cân bằng và co cụm nhất.
Cụ thể về chức năng này sẽ trình bày ở chương 4 của đồ án.

\section{Các công nghệ sử dụng}
\input{chapters/technology/front-end}
\input{chapters/technology/redis}
\input{chapters/technology/postgres}
\input{chapters/technology/back-end}
\input{chapters/technology/docker}
\input{chapters/technology/kubernetes}
\input{chapters/technology/azure}
